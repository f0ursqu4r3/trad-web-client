@import './tokens.css'; /* central design tokens */
@import 'tailwindcss';

/* Tailwind component shortcuts using @apply */
@layer components {
  /* --------------------------------------------------
     Consolidated component layer (deduplicated)
     -------------------------------------------------- */

  /* Terminal card */
  .terminal-card {
    @apply w-full max-w-[720px] overflow-hidden rounded-lg border border-term-border bg-term-bg text-term-fg shadow-xl;
  }

  /* Prompt rows */
  .prompt-row {
    @apply mb-2 flex items-center gap-2;
  }
  .prompt-chevron {
    @apply w-4 text-center text-term-accent;
  }
  .prompt-label {
    @apply w-24 shrink-0 text-[12px] text-term-dim;
  }
  .muted {
    @apply text-[12px] text-term-dim;
  }

  /* Inputs */
  .input-term {
    @apply flex-1 rounded border border-slate-700/70 bg-transparent px-2 py-1 text-[13px] outline-none transition focus:border-term-accent focus:ring-1 focus:ring-term-accent disabled:cursor-not-allowed disabled:opacity-60;
  }
  .select-term {
    @apply flex-1 rounded border border-slate-700/70 bg-transparent px-2 py-1 text-[13px] outline-none transition focus:border-term-accent focus:ring-1 focus:ring-term-accent disabled:cursor-not-allowed disabled:opacity-60 appearance-none pr-6;
  }
  .textarea-term {
    @apply flex-1 rounded border border-slate-700/70 bg-transparent px-2 py-1 text-[13px] outline-none transition focus:border-term-accent focus:ring-1 focus:ring-term-accent disabled:cursor-not-allowed disabled:opacity-60 min-h-[90px];
  }
  .form-hint {
    @apply mt-1 text-[11px] text-term-dim;
  }
  .field-row {
    @apply grid grid-cols-[10rem_1fr] items-start gap-3;
  }
  .input-invalid {
    @apply border-red-500/60 focus:border-red-500 focus:ring-1 focus:ring-red-500;
  }
  .field-error {
    @apply mt-1 text-[11px] text-red-400;
  }
  .input-term-sm {
    @apply px-1.5 py-0.5 text-[12px];
  }
  .input-term-lg {
    @apply px-3 py-2 text-[14px];
  }

  /* Buttons (base + states) */
  /* Fallback button styles (plugin not emitting in current Tailwind v4 setup) */
  .btn {
    @apply inline-flex items-center gap-1 border px-2 py-1 text-[12px] font-medium rounded tracking-wide cursor-pointer transition select-none;
    border-color: var(--btn-border);
    background: linear-gradient(var(--btn-bg-start), var(--btn-bg-end));
    color: var(--btn-fg);
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.4),
      inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  }
  .btn:hover:not(:disabled) {
    opacity: 0.95;
  }
  .btn:active:not(:disabled) {
    transform: translateY(1px);
  }
  .btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--accent-color);
  }
  .btn:disabled {
    @apply opacity-60 cursor-not-allowed;
    background: var(--panel-bg);
    color: var(--color-text-dim);
    box-shadow: none;
  }
  .btn[aria-pressed='true'],
  .btn[data-pressed='true'] {
    box-shadow:
      0 0 0 2px var(--accent-color),
      inset 0 0 0 1px var(--accent-color);
  }

  .btn-sm {
    @apply px-1.5 py-0.5 text-[11px];
  }
  .btn-lg {
    @apply px-3 py-2 text-[13px];
  }

  /* Primary (accent) */
  .btn-primary {
    text-transform: lowercase;
    border-color: rgba(47, 129, 247, 0.4);
    background: color-mix(in srgb, var(--accent-color) 20%, transparent);
    color: var(--accent-color);
  }
  .btn-primary:hover {
    border-color: var(--accent-color);
    background: color-mix(in srgb, var(--accent-color) 30%, transparent);
  }
  .btn-primary[aria-pressed='true'],
  .btn-primary[data-pressed='true'] {
    background: color-mix(in srgb, var(--accent-color) 40%, transparent);
  }

  /* Neutral / Secondary */
  .btn-neutral,
  .btn-secondary {
    text-transform: lowercase;
    border-color: rgba(71, 85, 105, 0.6);
    color: rgb(226 232 240);
  }
  .btn-neutral:hover,
  .btn-secondary:hover {
    background: rgba(71, 85, 105, 0.2);
  }
  .btn-neutral[aria-pressed='true'],
  .btn-secondary[aria-pressed='true'],
  .btn-neutral[data-pressed='true'],
  .btn-secondary[data-pressed='true'] {
    background: rgba(71, 85, 105, 0.2);
  }

  /* Danger */
  .btn-danger {
    text-transform: lowercase;
    border-color: rgba(239, 68, 68, 0.4);
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
  }
  .btn-danger:hover {
    border-color: #ef4444;
    background: rgba(239, 68, 68, 0.2);
  }
  .btn-danger[aria-pressed='true'],
  .btn-danger[data-pressed='true'] {
    background: rgba(239, 68, 68, 0.3);
  }

  /* Success */
  .btn-success {
    text-transform: lowercase;
    border-color: rgba(16, 185, 129, 0.4);
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
  }
  .btn-success:hover {
    border-color: #10b981;
    background: rgba(16, 185, 129, 0.2);
  }
  .btn-success[aria-pressed='true'],
  .btn-success[data-pressed='true'] {
    background: rgba(16, 185, 129, 0.3);
  }

  /* Warning */
  .btn-warn {
    text-transform: lowercase;
    border-color: rgba(255, 184, 108, 0.4);
    background: rgba(255, 184, 108, 0.1);
    color: #ffb86c;
  }
  .btn-warn:hover {
    border-color: #ffb86c;
    background: rgba(255, 184, 108, 0.2);
  }
  .btn-warn[aria-pressed='true'],
  .btn-warn[data-pressed='true'] {
    background: rgba(255, 184, 108, 0.3);
  }

  /* Info */
  .btn-info {
    text-transform: lowercase;
    border-color: rgba(47, 129, 247, 0.4);
    background: rgba(47, 129, 247, 0.1);
    color: #2f81f7;
  }
  .btn-info:hover {
    border-color: #2f81f7;
    background: rgba(47, 129, 247, 0.2);
  }
  .btn-info[aria-pressed='true'],
  .btn-info[data-pressed='true'] {
    background: rgba(47, 129, 247, 0.3);
  }

  /* Outline variants */
  .btn-outline,
  .btn-outline-primary {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(47, 129, 247, 0.6);
    color: var(--accent-color);
  }
  .btn-outline:hover,
  .btn-outline-primary:hover {
    background: color-mix(in srgb, var(--accent-color) 10%, transparent);
    border-color: var(--accent-color);
  }
  .btn-outline[aria-pressed='true'],
  .btn-outline[data-pressed='true'],
  .btn-outline-primary[aria-pressed='true'],
  .btn-outline-primary[data-pressed='true'] {
    background: color-mix(in srgb, var(--accent-color) 15%, transparent);
  }
  .btn-outline-danger {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(239, 68, 68, 0.6);
    color: #ef4444;
  }
  .btn-outline-danger:hover {
    background: rgba(239, 68, 68, 0.1);
    border-color: #ef4444;
  }
  .btn-outline-danger[aria-pressed='true'],
  .btn-outline-danger[data-pressed='true'] {
    background: rgba(239, 68, 68, 0.15);
  }
  .btn-outline-success {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(16, 185, 129, 0.6);
    color: #10b981;
  }
  .btn-outline-success:hover {
    background: rgba(16, 185, 129, 0.1);
    border-color: #10b981;
  }
  .btn-outline-success[aria-pressed='true'],
  .btn-outline-success[data-pressed='true'] {
    background: rgba(16, 185, 129, 0.15);
  }
  .btn-outline-neutral {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(71, 85, 105, 0.6);
    color: rgb(226 232 240);
  }
  .btn-outline-neutral:hover {
    background: rgba(71, 85, 105, 0.2);
    border-color: rgba(71, 85, 105, 1);
  }
  .btn-outline-neutral[aria-pressed='true'],
  .btn-outline-neutral[data-pressed='true'] {
    background: rgba(71, 85, 105, 0.25);
  }
  .btn-outline-warn {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(255, 184, 108, 0.6);
    color: #ffb86c;
  }
  .btn-outline-warn:hover {
    background: rgba(255, 184, 108, 0.1);
    border-color: #ffb86c;
  }
  .btn-outline-warn[aria-pressed='true'],
  .btn-outline-warn[data-pressed='true'] {
    background: rgba(255, 184, 108, 0.15);
  }
  .btn-outline-info {
    text-transform: lowercase;
    background: transparent;
    border-color: rgba(47, 129, 247, 0.6);
    color: #2f81f7;
  }
  .btn-outline-info:hover {
    background: rgba(47, 129, 247, 0.1);
    border-color: #2f81f7;
  }
  .btn-outline-info[aria-pressed='true'],
  .btn-outline-info[data-pressed='true'] {
    background: rgba(47, 129, 247, 0.15);
  }

  /* Ghost variants */
  .btn-ghost,
  .btn-ghost-primary {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: var(--accent-color);
    box-shadow: none;
  }
  .btn-ghost:hover,
  .btn-ghost-primary:hover {
    background: color-mix(in srgb, var(--accent-color) 12%, transparent);
  }
  .btn-ghost[aria-pressed='true'],
  .btn-ghost[data-pressed='true'],
  .btn-ghost-primary[aria-pressed='true'],
  .btn-ghost-primary[data-pressed='true'] {
    background: color-mix(in srgb, var(--accent-color) 20%, transparent);
  }
  .btn-ghost-danger {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: #ef4444;
    box-shadow: none;
  }
  .btn-ghost-danger:hover {
    background: rgba(239, 68, 68, 0.12);
  }
  .btn-ghost-danger[aria-pressed='true'],
  .btn-ghost-danger[data-pressed='true'] {
    background: rgba(239, 68, 68, 0.2);
  }
  .btn-ghost-success {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: #10b981;
    box-shadow: none;
  }
  .btn-ghost-success:hover {
    background: rgba(16, 185, 129, 0.12);
  }
  .btn-ghost-success[aria-pressed='true'],
  .btn-ghost-success[data-pressed='true'] {
    background: rgba(16, 185, 129, 0.2);
  }
  .btn-ghost-neutral {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: rgb(226 232 240);
    box-shadow: none;
  }
  .btn-ghost-neutral:hover {
    background: rgba(71, 85, 105, 0.2);
  }
  .btn-ghost-neutral[aria-pressed='true'],
  .btn-ghost-neutral[data-pressed='true'] {
    background: rgba(71, 85, 105, 0.25);
  }
  .btn-ghost-warn {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: #ffb86c;
    box-shadow: none;
  }
  .btn-ghost-warn:hover {
    background: rgba(255, 184, 108, 0.12);
  }
  .btn-ghost-warn[aria-pressed='true'],
  .btn-ghost-warn[data-pressed='true'] {
    background: rgba(255, 184, 108, 0.2);
  }
  .btn-ghost-info {
    text-transform: lowercase;
    background: transparent;
    border-color: transparent;
    color: #2f81f7;
    box-shadow: none;
  }
  .btn-ghost-info:hover {
    background: rgba(47, 129, 247, 0.12);
  }
  .btn-ghost-info[aria-pressed='true'],
  .btn-ghost-info[data-pressed='true'] {
    background: rgba(47, 129, 247, 0.2);
  }

  .icon-btn {
    @apply inline-flex items-center justify-center border rounded text-[12px] px-1.5 py-1 cursor-pointer transition;
    border-color: var(--border-color);
    background: linear-gradient(var(--btn-bg-start), var(--btn-bg-end));
    color: currentColor;
    box-shadow:
      0 1px 2px rgba(0, 0, 0, 0.4),
      inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  }
  .icon-btn:hover:not(:disabled) {
    opacity: 0.9;
  }
  .icon-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--accent-color);
  }
  .icon-btn:disabled {
    @apply opacity-50 cursor-not-allowed;
    background: var(--panel-bg);
    box-shadow: none;
  }
  .icon-btn[aria-pressed='true'],
  .icon-btn[data-pressed='true'] {
    box-shadow:
      0 0 0 2px var(--accent-color),
      inset 0 0 0 1px var(--accent-color);
  }

  /* Icon button (doesn't rely on @extend) */
  /* (icon-btn also moved to plugin) */

  /* Panels */
  .panel-card {
    @apply rounded-md border shadow-sm;
    background: var(--panel-bg);
    border-color: var(--border-color);
    color: inherit;
  }
  .panel-header-row {
    @apply flex items-center justify-between px-2 py-1 text-[11px] uppercase tracking-wide;
    background: var(--panel-header-bg);
    border-bottom: 1px solid var(--border-color);
    color: var(--color-text-dim);
  }
  .section-divider {
    @apply my-2 h-px w-full border-0;
    background: var(--panel-border-inner);
  }

  /* Toolbars */
  .toolbar-row {
    @apply flex items-center justify-between gap-2 border-b border-slate-700/60 bg-[var(--panel-header-bg)] px-2 py-1 text-[12px] text-[var(--color-text-dim)];
  }
  .toolbar-section {
    @apply inline-flex items-center gap-4;
  }
  .toolbar-spacer {
    @apply grow;
  }

  /* Menus */
  .menu-anchor {
    @apply relative;
  }
  .menu-dropdown {
    @apply absolute right-0 top-[110%] z-50 min-w-[140px] rounded border py-1 text-[13px] shadow-lg;
    background: var(--panel-bg);
    border-color: var(--border-color);
    color: var(--color-text);
  }
  .menu-item {
    @apply cursor-pointer whitespace-nowrap px-2.5 py-1.5;
  }
  .menu-item:hover {
    @apply bg-white/5;
  }
  .menu-empty {
    @apply px-2.5 py-1.5 text-[12px] text-term-dim;
  }

  /* Skeletons */
  .skeleton {
    @apply animate-pulse rounded bg-slate-500/20;
  }
  .skeleton-line {
    @apply animate-pulse rounded bg-slate-500/20 h-3;
  }

  /* Lists */
  .list-row {
    @apply flex items-center justify-between gap-3 border-b border-slate-800/60 px-2 py-1.5 text-[13px];
  }
  .list-row-hover {
    @apply hover:bg-white/5;
  }

  /* Helpers */
  .code-inline {
    @apply rounded border px-1.5 py-0.5 text-[12px] font-mono;
    background: color-mix(in srgb, var(--panel-header-bg) 70%, transparent);
    border-color: var(--border-color);
  }
  .shadow-term {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.45);
  }

  /* Notices */
  .notice {
    @apply mt-3 text-[12px];
  }
  .notice-ok {
    @apply mt-3 text-[12px] text-term-ok;
  }
  .notice-err {
    @apply mt-3 text-[12px] text-term-err;
  }

  /* Badges / chips */
  .badge,
  .chip {
    @apply inline-flex items-center gap-1 rounded border px-1.5 py-0.5 text-[11px];
    background: var(--panel-header-bg);
    border-color: var(--border-color);
    color: var(--color-text-dim);
  }

  /* Status pills */
  .pill {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium bg-term-dim/10 text-term-dim ring-1 ring-inset ring-term-dim/30;
  }
  .pill-ok {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium bg-term-ok/10 text-term-ok ring-1 ring-inset ring-term-ok/30;
  }
  .pill-err {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium bg-term-err/10 text-term-err ring-1 ring-inset ring-term-err/30;
  }
  .pill-warn {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium bg-yellow-500/10 text-yellow-300 ring-1 ring-inset ring-yellow-500/30;
  }
  .pill-info {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium bg-term-accent/10 text-term-accent ring-1 ring-inset ring-term-accent/30;
  }

  /* Links */
  a.link-term {
    @apply text-term-accent underline underline-offset-2 hover:opacity-90;
  }

  /* Tables */
  .table-tiny {
    @apply w-full text-[12px];
  }
  .table-tiny thead th {
    @apply py-1 text-left font-medium text-term-dim border-b border-slate-700/70;
  }
  .table-tiny tbody td {
    @apply py-1 align-top border-b border-slate-800/70;
  }
  .table-compact tbody tr:hover {
    @apply bg-white/5;
  }

  /* Scroll area */
  .scroll-area {
    @apply overflow-auto;
  }
}

/* Optional smooth swap */
body,
.dockview-wrapper {
  transition:
    background-color 0.25s ease,
    color 0.25s ease;
}

/* Dockview adjustments (base light) */
.dockview-theme-trad {
  --dv-activegroup-background: var(--panel-bg);
  --dv-group-view-background: var(--panel-bg);
  --dv-tabs-container-background: var(--panel-header-bg);
  --dv-paneview-header-background: var(--panel-header-bg);
  --dv-color: var(--color-text-dim);
  --dv-separator-color: var(--border-color);
  /* lighter shadow for light theme */
  --dv-floatingbox-shadow: 0 0 0 1px var(--border-color), 0 4px 16px rgba(0, 0, 0, 0.1);
}
/* Dark theme Dockview overrides */
[data-theme='dark'] .dockview-theme-trad {
  --dv-floatingbox-shadow: 0 0 0 1px var(--border-color), 0 4px 16px rgba(0, 0, 0, 0.4);
}
html,
body {
  margin: 0;
  padding: 0;
  /* Terminal-esque baseline: prefer monospace globally */
  font-family: var(
    --font-mono,
    'SFMono-Regular',
    ui-monospace,
    'JetBrains Mono',
    'Source Code Pro',
    Menlo,
    Consolas,
    monospace
  );
  line-height: 1.35;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--color-bg);
  color: var(--color-text);
  /* Firefox themed scrollbar colors */
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

body,
#app {
  height: 100vh;
}

/* Scrollbars subtle */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

.panel {
  /* fallback if used outside scope */
  background: var(--panel-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
}

.panel-header {
  background: var(--panel-header-bg);
  padding: 0 0.5rem;
}

/* (Removed original dark-as-default Dockview block; now overridden above for dark) */

.dockview-theme-trad .dv-tabs-and-actions-container {
  font-family: var(--font-mono);
  font-size: 11px;
}

.dockview-theme-trad .dv-tab,
.dockview-theme-trad .dv-default-tab {
  align-content: center;
  padding: 0px 4px;
}

.dockview-theme-trad .dv-tab.dockview-active {
  color: var(--color-text);
  background: #222a31;
  position: relative;
}

.dockview-theme-trad .dv-tab.dockview-active::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 2px;
  background: var(--accent-color);
}

.dockview-theme-trad .dv-paneview-header {
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 11px;
}

/* Hover & focus states */
.dockview-theme-trad .dv-tab:hover:not(.dockview-active) {
  background: #1e252b;
  color: var(--color-text);
}

.dockview-theme-trad .dv-tab:focus-visible {
  outline: 2px solid var(--accent-color);
  outline-offset: -2px;
}

/* Drag overlay */
.dockview-theme-trad .dv-drop-target-overlay {
  box-shadow:
    0 0 0 1px var(--accent-color),
    0 0 0 3px rgba(47, 129, 247, 0.35);
  border-radius: 4px;
}

/* Resize handle emphasis */
.dockview-theme-trad .dv-sash {
  background: transparent;
}

.dockview-theme-trad .dv-sash:hover {
  background: #2a323a;
}

.dockview-theme-trad .dv-sash.active {
  background: var(--accent-color);
}

/* Dark theme */
[data-theme='dark'] .button {
  --btn-bg-start: #3e3e3e;
  --btn-bg-end: #2a2a2a;
  --btn-border: #555;
  --btn-fg: #e8e8e8;
}

/* --------------------------------------------------
   Terminal-style utilities (opt-in)
   -------------------------------------------------- */
.mono {
  font-family: var(
    --font-mono,
    'SFMono-Regular',
    ui-monospace,
    'JetBrains Mono',
    'Source Code Pro',
    Menlo,
    Consolas,
    monospace
  );
}

.dim {
  color: var(--color-text-dim);
}

.kbd {
  font-family: var(--font-mono);
  background: var(--panel-header-bg);
  border: 1px solid var(--border-color);
  border-bottom-color: var(--color-border-strong);
  padding: 0 4px;
  border-radius: 3px;
  font-size: 0.85em;
}

/* Prompt-style line (chevron, label, input) */
.prompt-line {
  display: grid;
  grid-template-columns: 1.25rem auto 1fr;
  align-items: center;
  gap: 0.5rem;
  padding: 0.35rem 0;
}
.prompt-line .chevron {
  color: var(--accent-color);
}
.prompt-line label {
  color: var(--color-text-dim);
  font-size: 13px;
}
.prompt-line input,
.prompt-line textarea {
  background: transparent;
  border: none;
  border-bottom: 1px dashed rgba(127, 127, 127, 0.25);
  padding: 4px 2px 3px 2px;
  color: inherit;
  caret-color: var(--accent-color);
  font-family: inherit;
  font-size: 13px;
}
.prompt-line input:focus,
.prompt-line textarea:focus {
  outline: none;
  border-bottom: 1px solid var(--accent-color);
}
.prompt-line input:disabled,
.prompt-line textarea:disabled {
  opacity: 0.6;
}

/* Selection color tuned to accent */
::selection {
  background: color-mix(in srgb, var(--accent-color) 30%, transparent);
}
