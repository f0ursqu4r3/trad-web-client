/* Design Tokens (Light + Dark + Terminal) */
/* Tailwind v4 @theme block for palette-driven utilities */
@theme {
  /* Terminal palette */
  --color-term-bg: #0b0f14;
  --color-term-fg: #e6edf3;
  --color-term-dim: #8b949e;
  --color-term-accent: #2f81f7;
  --color-term-border: #1f2630;
  --color-term-ok: #4ade80;
  --color-term-err: #f87171;
  --color-term-warn: #ffb86c;
  --color-term-info: #2f81f7;

  /* Base semantic colors (light) */
  --color-bg: #f5f7fa;
  --color-bg-alt: #ffffff;
  --panel-bg: #ffffff;
  --panel-header-bg: #eef1f5;
  --panel-border-inner: #dfe3e8;
  --border-color: #cfd6dd;
  --color-text: #1f2328;
  --color-text-dim: #57606a;
  --accent-color: #0969da;
  --color-bg-secondary: #f5f7fa;
  --color-bg-tertiary: #eef1f5;
  --color-success: #2abf6e;
  --color-error: #d73a49;
  --color-warning: #ffa500;
  --color-info: #2f81f7;
  --color-border-strong: #cfd6dd;

  /* Button gradient + typography */
  --btn-bg-start: #ffffff;
  --btn-bg-end: #f1f4f8;
  --btn-border: #dfe3e8;
  --btn-fg: #1f2328;

  /* Pill (status) tokens (light) */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 10%; /* surface fill */
  --pill-ring-alpha: 30%; /* outline/ring */

  /* Button variant semantic tokens (light) */
  --btn-color-primary: var(--accent-color);
  --btn-color-danger: var(--color-error);
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  /* Neutral uses a pair (bg/border base + readable fg) for light theme */
  --btn-color-neutral: #475569; /* slate-600 (border/source) */
  --btn-color-neutral-fg: #334155; /* slate-700 for readable text on light */

  /* Shared alpha stop guidance (percent values used in color-mix calls) */
  --btn-alpha-border: 40%;
  --btn-alpha-surface: 10%;
  --btn-alpha-surface-hover: 20%;
  --btn-alpha-surface-active: 30%;
  --btn-alpha-outline-border: 60%;
  --btn-alpha-outline-surface-hover: 10%;
  --btn-alpha-outline-surface-active: 15%;
  --btn-alpha-ghost-hover: 12%;
  --btn-alpha-ghost-active: 20%;

  --font-mono:
    'SFMono-Regular', ui-monospace, 'JetBrains Mono', 'Source Code Pro', Menlo, Consolas, monospace;

  /* Scrollbar (light) */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #c8d1da;
  --scrollbar-thumb-hover: #b6c0cb;
}

/* Dark mode overrides */
[data-theme='dark'] {
  --color-bg: #121417;
  --color-bg-alt: #1a1d21;
  --panel-bg: #16191d;
  --panel-header-bg: #20252b;
  --panel-border-inner: #232a31;
  --border-color: #2a3139;
  --color-text: #d0d7de;
  --color-text-dim: #8b949e;
  --accent-color: #2f81f7;
  --btn-bg-start: #3e3e3e;
  --btn-bg-end: #2a2a2a;
  --btn-border: #555;
  --btn-fg: #e8e8e8;
  --color-bg-secondary: #1a1d21;
  --color-bg-tertiary: #20252b;
  --color-success: #4ade80;
  --color-error: #f87171;
  --color-warning: #ffb86c;
  --color-info: #2f81f7;
  --color-border-strong: #343c45;

  /* Pill (status) tokens (dark) */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 12%; /* slightly higher for dark legibility */
  --pill-ring-alpha: 35%;

  /* Button variant semantic tokens (dark overrides) */
  --btn-color-primary: var(--accent-color);
  --btn-color-danger: var(--color-error);
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  --btn-color-neutral: #64748b; /* slate-500 */
  --btn-color-neutral-fg: #e2e8f0; /* slate-200 for contrast on dark */

  /* Alphas can stay the same across themes (tweak if needed later) */
  --btn-alpha-border: 40%;
  --btn-alpha-surface: 12%; /* slightly higher base fill in dark not needed; keep subtle */
  --btn-alpha-surface-hover: 20%;
  --btn-alpha-surface-active: 30%;
  --btn-alpha-outline-border: 60%;
  --btn-alpha-outline-surface-hover: 12%;
  --btn-alpha-outline-surface-active: 18%;
  --btn-alpha-ghost-hover: 12%;
  --btn-alpha-ghost-active: 20%;

  /* Scrollbar (dark) */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #2a3037;
  --scrollbar-thumb-hover: #343c45;
}

/* Synthwave (retro neon) theme overrides */
[data-theme='synthwave'] {
  /* Core surfaces */
  --color-bg: #130b1a; /* deep cosmic purple */
  --color-bg-alt: #1b0f25;
  --panel-bg: #1a0f23;
  --panel-header-bg: #23112f;
  --panel-border-inner: #372046;
  --border-color: #3e2751;
  --color-text: #f5e9ff;
  --color-text-dim: #c9b2d9;
  --accent-color: #ff6ec7; /* neon magenta */
  --color-bg-secondary: #1d1227;
  --color-bg-tertiary: #271534;

  /* Status / semantic */
  --color-success: #47f4c2; /* mint */
  --color-error: #ff4d6d; /* hot pink/red */
  --color-warning: #ffc857; /* sunset amber */
  --color-info: #7ad7ff; /* cyan */
  --color-border-strong: #56306f;

  /* Terminal adjustments (slight neon tilt) */
  --color-term-accent: var(--accent-color);
  --color-term-bg: #140a1e;
  --color-term-fg: #f5e9ff;
  --color-term-dim: #b899cc;
  --color-term-border: #2d1840;

  /* Buttons (reuse variable model) */
  --btn-bg-start: #291538;
  --btn-bg-end: #1d0d28;
  --btn-border: #513066;
  --btn-fg: #f5e9ff;

  /* Pill styling (slightly higher alpha for glow feel) */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 14%;
  --pill-ring-alpha: 40%;

  /* Button semantic colors */
  --btn-color-primary: var(--accent-color);
  --btn-color-danger: var(--color-error);
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  --btn-color-neutral: #b26dff; /* lavender primary neutral */
  /* Use a high-contrast light foreground; prior deep purple was illegible on dark gradient */
  --btn-color-neutral-fg: #f5e9ff;

  /* Use same alpha constants (can fine-tune later) */
  --btn-alpha-border: 50%;
  /* Boost surface fills for better legibility against deep background */
  --btn-alpha-surface: 24%;
  --btn-alpha-surface-hover: 34%;
  --btn-alpha-surface-active: 45%;
  --btn-alpha-outline-border: 65%;
  --btn-alpha-outline-surface-hover: 14%;
  --btn-alpha-outline-surface-active: 20%;
  --btn-alpha-ghost-hover: 16%;
  --btn-alpha-ghost-active: 26%;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #3b224d;
  --scrollbar-thumb-hover: #4a2b61;
}

/* Legacy (CC29 palette) theme overrides */
[data-theme='legacy'] {
  /* Palette reference (CC29)
     background_primary: #212123
     background_secondary: #352b42
     background_interactive: #45444f
     border_normal: #646365
     border_active: #f2f0e5
     button: #4b4158
     button_hover: #5f556a
     text_default: #f2f0e5
     text_muted: #868188
     text_error: #b45252
     text_success: #8ab060
     text_warning: #a77b5b
     text_command_name (used as accent/info): #68c2d3
     text_arg_name: #b2b47e
     syntax_symbol: #cf8acb
     syntax_number: #d3a068
     syntax_keyword: #4b80ca
  */
  /* Core surfaces */
  --color-bg: #212123; /* background_primary */
  --color-bg-alt: #352b42; /* background_secondary */
  --panel-bg: #212123; /* align panels with secondary */
  --panel-header-bg: #45444f; /* background_interactive */
  --panel-border-inner: #45444f; /* subtle inner separation */
  --border-color: #646365; /* border_normal */
  --color-border-strong: #f2f0e5; /* border_active (high contrast) */

  /* Typography / text */
  --color-text: #f2f0e5; /* text_default */
  --color-text-dim: #868188; /* text_muted */
  --accent-color: #68c2d3; /* command name cyan doubles as accent */

  /* Semantic/status */
  --color-success: #8ab060; /* text_success */
  --color-error: #b45252; /* text_error */
  --color-warning: #a77b5b; /* text_warning */
  --color-info: #68c2d3; /* re-use accent */

  /* Terminal adjustments (bring in palette while staying readable) */
  --color-term-bg: #212123;
  --color-term-fg: #f2f0e5;
  --color-term-dim: #868188;
  --color-term-accent: #68c2d3;
  --color-term-border: #352b42;
  --color-term-ok: #8ab060;
  --color-term-err: #b45252;
  --color-term-warn: #a77b5b;
  --color-term-info: #68c2d3;

  /* Buttons (gradient derived from button + button_hover) */
  --btn-bg-start: #5f556a; /* button_hover (lighter) */
  --btn-bg-end: #4b4158; /* button (darker) */
  --btn-border: #646365; /* border_normal */
  --btn-fg: #f2f0e5; /* text_default */

  /* Pills (similar tuning to dark theme, slight lift for contrast) */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 13%;
  --pill-ring-alpha: 38%;

  /* Button semantic colors */
  --btn-color-primary: var(--accent-color);
  --btn-color-danger: var(--color-error);
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  --btn-color-neutral: #4b4158; /* base button tone */
  --btn-color-neutral-fg: #f2f0e5; /* ensure legibility */

  /* Reuse global alpha guidance (can override later if needed) */
  --btn-alpha-border: 40%;
  --btn-alpha-surface: 14%;
  --btn-alpha-surface-hover: 22%;
  --btn-alpha-surface-active: 30%;
  --btn-alpha-outline-border: 60%;
  --btn-alpha-outline-surface-hover: 12%;
  --btn-alpha-outline-surface-active: 18%;
  --btn-alpha-ghost-hover: 14%;
  --btn-alpha-ghost-active: 22%;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #3b3a40; /* mix of bg_interactive + dim */
  --scrollbar-thumb-hover: #4a4950;
}

/* Fantasy24 theme overrides (earthy arcane palette) */
[data-theme='fantasy24'] {
  /* Source colors reference (ordered as provided)
     1: #1f240a (deep olive)            2: #39571c (forest green)
     3: #a58c27 (muted gold)            4: #efac28 (bright amber)
     5: #efd8a1 (parchment)             6: #ab5c1c (burnt orange)
     7: #183f39 (deep teal)             8: #ef692f (ember orange)
     9: #efb775 (soft peach gold)      10: #a56243 (rust light)
    11: #773421 (deep rust)            12: #724113 (brown ochre)
    13: #2a1d0d (dark sepia)           14: #392a1c (mid sepia)
    15: #684c3c (aged wood)            16: #927e6a (faded parchment)
    17: #276468 (teal medium)          18: #ef3a0c (molten red/orange)
    19: #45230d (soot brown)           20: #3c9f9c (cerulean teal)
    21: #9b1a0a (deep blood)           22: #36170c (charred brown)
    23: #550f0a (dark ember)           24: #300f0a (coal ember) */

  /* Core surfaces (layered depth: bg < alt < tertiary) */
  --color-bg: #1f240a; /* base cavern */
  --color-bg-alt: #2a1d0d; /* deeper chamber */
  --panel-bg: #2a1d0d; /* panels match alt */
  --panel-header-bg: #392a1c; /* slightly lifted header */
  --panel-border-inner: #45230d; /* subtle inner line */
  --border-color: #392a1c; /* neutral border */
  --color-border-strong: #efd8a1; /* parchment highlight */

  /* Text */
  --color-text: #efd8a1; /* primary readable */
  --color-text-dim: #927e6a; /* secondary */
  --accent-color: #3c9f9c; /* cool contrast accent (teal) */

  /* Semantic status */
  --color-success: #39571c; /* forest green */
  --color-error: #ef3a0c; /* molten error */
  --color-warning: #efac28; /* bright amber */
  --color-info: #3c9f9c; /* teal reused */

  /* Terminal (harmonized) */
  --color-term-bg: #1f240a;
  --color-term-fg: #efd8a1;
  --color-term-dim: #927e6a;
  --color-term-accent: #3c9f9c;
  --color-term-border: #392a1c;
  --color-term-ok: #39571c;
  --color-term-err: #ef3a0c;
  --color-term-warn: #efac28;
  --color-term-info: #3c9f9c;

  /* Buttons (primary gradient draws from rust → deep rust) */
  --btn-bg-start: #a56243; /* lighter rust */
  --btn-bg-end: #773421; /* deep rust */
  --btn-border: #684c3c; /* aged wood */
  --btn-fg: #efd8a1; /* parchment text */

  /* Pills */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 15%; /* slightly higher for dark earthy surfaces */
  --pill-ring-alpha: 42%;

  /* Button semantic variants */
  --btn-color-primary: var(--accent-color); /* teal */
  --btn-color-danger: #9b1a0a; /* deeper blood tone */
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  --btn-color-neutral: #684c3c; /* wood neutral */
  --btn-color-neutral-fg: #efd8a1; /* parchment */

  /* Alpha tuning (slightly stronger fills than legacy) */
  --btn-alpha-border: 45%;
  --btn-alpha-surface: 18%;
  --btn-alpha-surface-hover: 26%;
  --btn-alpha-surface-active: 34%;
  --btn-alpha-outline-border: 65%;
  --btn-alpha-outline-surface-hover: 16%;
  --btn-alpha-outline-surface-active: 22%;
  --btn-alpha-ghost-hover: 18%;
  --btn-alpha-ghost-active: 28%;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #392a1c;
  --scrollbar-thumb-hover: #45230d;
}

/* Tomorrow Night Eighties theme (canonical palette) */
[data-theme='tomorrowNight80s'] {
  /* Canon palette (Tomorrow Night Eighties)
     Background: #2d2d2d  Current Line: #393939  Selection: #515151
     Foreground: #cccccc  Comment: #999999
     Red: #f2777a  Orange: #f99157  Yellow: #ffcc66  Green: #99cc99
     Aqua: #66cccc  Blue: #6699cc  Purple: #cc99cc
  */
  /* Surfaces */
  --color-bg: #2d2d2d; /* background */
  --color-bg-alt: #393939; /* elevated surface (current line) */
  --panel-bg: #2d2d2d; /* panels flush */
  --panel-header-bg: #393939; /* header surface */
  --panel-border-inner: #515151; /* selection as inner divider */
  --border-color: #515151; /* normal border */
  --color-border-strong: #666666; /* stronger edge */

  /* Typography */
  --color-text: #cccccc; /* foreground */
  --color-text-dim: #999999; /* comments / secondary */
  --accent-color: #6699cc; /* choose blue as primary accent */

  /* Semantic (map directly to canonical hues) */
  --color-success: #99cc99; /* green */
  --color-error: #f2777a; /* red */
  --color-warning: #ffcc66; /* yellow */
  --color-info: #66cccc; /* aqua */

  /* Terminal */
  --color-term-bg: #2d2d2d;
  --color-term-fg: #cccccc;
  --color-term-dim: #999999;
  --color-term-accent: #6699cc; /* accent = blue */
  --color-term-border: #393939;
  --color-term-ok: #99cc99;
  --color-term-err: #f2777a;
  --color-term-warn: #ffcc66;
  --color-term-info: #66cccc;

  /* Buttons (graphite gradient using selection + alt) */
  --btn-bg-start: #515151; /* lighter (selection) */
  --btn-bg-end: #393939; /* darker (alt) */
  --btn-border: #666666; /* strong border */
  --btn-fg: #cccccc; /* readable */

  /* Pills */
  --pill-color-neutral: var(--color-text-dim);
  --pill-color-ok: var(--color-success);
  --pill-color-err: var(--color-error);
  --pill-color-warn: var(--color-warning);
  --pill-color-info: var(--color-info);
  --pill-bg-alpha: 14%;
  --pill-ring-alpha: 40%;

  /* Button semantic variants */
  --btn-color-primary: var(--accent-color); /* blue */
  --btn-color-danger: var(--color-error);
  --btn-color-success: var(--color-success);
  --btn-color-warn: var(--color-warning);
  --btn-color-info: var(--color-info);
  --btn-color-neutral: #515151; /* neutral graphite */
  --btn-color-neutral-fg: #e0e0e0;

  /* Alpha tuning (slightly toned down from neon version) */
  --btn-alpha-border: 42%;
  --btn-alpha-surface: 18%;
  --btn-alpha-surface-hover: 26%;
  --btn-alpha-surface-active: 34%;
  --btn-alpha-outline-border: 60%;
  --btn-alpha-outline-surface-hover: 14%;
  --btn-alpha-outline-surface-active: 20%;
  --btn-alpha-ghost-hover: 16%;
  --btn-alpha-ghost-active: 24%;

  /* Scrollbar */
  --scrollbar-track: transparent;
  --scrollbar-thumb: #393939;
  --scrollbar-thumb-hover: #515151;
}

/* Body inheritance helper */
[data-theme='dark'] body {
  background: var(--color-bg);
  color: var(--color-text);
}

/* Body inheritance for synthwave */
[data-theme='synthwave'] body {
  background: var(--color-bg);
  color: var(--color-text);
}

/* Body inheritance for legacy */
[data-theme='legacy'] body {
  background: var(--color-bg);
  color: var(--color-text);
}

/* Body inheritance for fantasy24 */
[data-theme='fantasy24'] body {
  background: var(--color-bg);
  color: var(--color-text);
}

/* Body inheritance for tomorrow80s */
[data-theme='tomorrowNight80s'] body {
  background: var(--color-bg);
  color: var(--color-text);
}

/* Grouping tokens for potential future export (e.g., JS consumption) */
:root {
  /* Acts as a documentation grouping layer; values already applied via @theme */
}
